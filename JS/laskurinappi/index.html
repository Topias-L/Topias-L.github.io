<!DOCTYPE html>

<!-- 	
	Koodin Tekijä: Topias Laitinen TVT-C 2021
	Koodin kirjoittamisessa avustanut myös Mikko Ruotsalainen, W3Schools ja StackOverflow
-->

<html>
	<head>
		<meta charset="UTF-8" />
		<title>Palautesovellus</title>
		<link rel="Stylesheet" href="css/styles.css" type="text/css">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
		<script>
			function AddNum1(elem) {
				var laskuri = parseInt(document.getElementById("nro1").innerHTML);
				laskuri++;
				console.log("Laskuri 1:n uusi arvo: " + laskuri);
				document.getElementById("nro1").innerHTML = laskuri;
				btnDelay(elem);
			}
			function AddNum2(elem) {
				var laskuri = parseInt(document.getElementById("nro2").innerHTML);
				laskuri++;
				console.log("Laskuri 2:n uusi arvo: " + laskuri);
				document.getElementById("nro2").innerHTML = laskuri;
				btnDelay(elem);
			}
			function AddNum3(elem) {
				var laskuri = parseInt(document.getElementById("nro3").innerHTML);
				laskuri++;
				console.log("Laskuri 3:n uusi arvo: " + laskuri);
				document.getElementById("nro3").innerHTML = laskuri;
				btnDelay(elem);
			}
			function AddNum4(elem) {
				var laskuri = parseInt(document.getElementById("nro4").innerHTML);
				laskuri++;
				console.log("Laskuri 4:n uusi arvo: " + laskuri);
				document.getElementById("nro4").innerHTML = laskuri;
				btnDelay(elem);
			}
			function AddNum5(elem) {
				var laskuri = parseInt(document.getElementById("nro5").innerHTML);
				laskuri++;
				console.log("Laskuri 5:n uusi arvo: " + laskuri);
				document.getElementById("nro5").innerHTML = laskuri;
				btnDelay(elem);
			}
			function Message() {
				document.getElementById("msg").setAttribute("class","visible");
				setTimeout(function(){
						document.getElementById("msg").setAttribute("class","hidden");
				}, 2000);
			}
			function btnDelay(elem) {
				document.querySelectorAll("button").forEach(el => el.setAttribute("disabled", true));
				setTimeout(function(){
					document.querySelectorAll("button").forEach(el => el.removeAttribute("disabled"));
				},2000);
			}
			function TietojenLähetys() {
				var value1 = document.getElementById("nro1").innerHTML;
				var value2 = document.getElementById("nro2").innerHTML;
				var value3 = document.getElementById("nro3").innerHTML;
				var value4 = document.getElementById("nro4").innerHTML;
				var value5 = document.getElementById("nro5").innerHTML;
				var sposti = prompt("Vierailupäivän palautteet:\n5/5: " + value1 + " | 4/5: " + value2 + " | 3/5: " + value3 + " | 2/5: " + value4 + " | 1/5: " + value5
				+ "\n\nKenelle palautteet laitetaan?\nSyötä saajan Sähköposti osoite.\n\nHUOM!\nPalautuksen lähettämisen jälkeen sivu päivitetään 10 sekuntin viiveellä!", "testi@gmail.com");
				if (sposti == null) {
					console.log("Palautteen lähettäminen peruutettu.");
				} else {
					var date = new Date();
					var today = date.getDate();
					var month = date.getMonth()+1;
					var year = date.getFullYear();
					
					var hour = date.getHours();
					var minute = date.getMinutes();
					
					var pvm = today + "." + month + "." + year;
					var klo = hour + ":" + minute;
					var viesti = "Lähetetty: " + pvm + " Klo: " + klo + "\n\nVierailupäivän kävijäpalaute\n1/5: " + value1 + "\n2/5: " + value2 + 
								 "\n3/5: " + value3 + "\n4/5: " + value4 + "\n5/5: " + value5 + 
								 "\n\nTämän viestin on lähettänyt koodi, joka on Vierailupäivän kävijäpalaute sovelluksesta.";
					console.log("Palautteet lähtetetty osoitteeseen: " + sposti);
					console.log(viesti);
					console.warn("HUOM! Sivu päivittyy uudelleen 10 sekuntin päästä palautuksen lähttämisen jälkeen!");
					setTimeout(function(){
						window.location.reload();
					}, 10000);
				}
			}
		</script>
	</head>
	<body>
		<div id="background">Vierailupäivän kävijäpalaute</div>
		
		<div id="text">Mitä pidit kierroksesta?</div>
		
		<div id="msg">Kiitos Palautteestasi!</div>
		
		<div id="nro1">0</div>
		<div id="nro2">0</div>
		<div id="nro3">0</div>
		<div id="nro4">0</div>
		<div id="nro5">0</div>
		
		<button type="button" class="button button1" onClick="AddNum1(this);Message();">★★★★★</button>
		<button type="button" class="button button2" onClick="AddNum2(this);Message();">★★★★</button>
		<button type="button" class="button button3" onClick="AddNum3(this);Message();">★★★</button>
		<button type="button" class="button button4" onClick="AddNum4(this);Message();">★★</button>
		<button type="button" class="button button5" onClick="AddNum5(this);Message();">★</button>
		
		<button class="button Tiedot" onClick="TietojenLähetys();"></button>
		
	</body>
</html>
<!--
    ▲        ▼        ▲        ▼        ▲        ▼        ▲        ▼        ▲
   ▲ ▲      ▼ ▼      ▲ ▲      ▼ ▼      ▲ ▲      ▼ ▼      ▲ ▲      ▼ ▼      ▲ ▲
  ▲   ▲    ▼ ▼ ▼    ▲   ▲    ▼ ▼ ▼    ▲   ▲    ▼ ▼ ▼    ▲   ▲    ▼ ▼ ▼    ▲   ▲
 ▲     ▲  ▼ ▼ ▼ ▼  ▲     ▲  ▼ ▼ ▼ ▼  ▲     ▲  ▼ ▼ ▼ ▼  ▲     ▲  ▼ ▼ ▼ ▼  ▲     ▲
▲       ▲▼ ▼ ▼ ▼ ▼▲       ▲▼ ▼ ▼ ▼ ▼▲       ▲▼ ▼ ▼ ▼ ▼▲       ▲▼ ▼ ▼ ▼ ▼▲       ▲
▼       ▼▲ ▲ ▲ ▲ ▲▼       ▼▲ ▲ ▲ ▲ ▲▼       ▼▲ ▲ ▲ ▲ ▲▼       ▼▲ ▲ ▲ ▲ ▲▼       ▼
 ▼     ▼  ▲ ▲ ▲ ▲  ▼     ▼  ▲ ▲ ▲ ▲  ▼     ▼  ▲ ▲ ▲ ▲  ▼     ▼  ▲ ▲ ▲ ▲  ▼     ▼
  ▼   ▼    ▲ ▲ ▲    ▼   ▼    ▲ ▲ ▲    ▼   ▼    ▲ ▲ ▲    ▼   ▼    ▲ ▲ ▲    ▼   ▼
   ▼ ▼      ▲ ▲      ▼ ▼      ▲ ▲      ▼ ▼      ▲ ▲      ▼ ▼      ▲ ▲      ▼ ▼
    ▼        ▲        ▼        ▲        ▼        ▲        ▼        ▲        ▼
-->